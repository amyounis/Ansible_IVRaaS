---

APACHE_FILE:
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.0.vhost}}/ROOT"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.1.vhost}}/ROOT"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.2.vhost}}/ROOT"	 	, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.3.vhost}}/ROOT"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.4.vhost}}/ROOT"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.5.vhost}}/ROOT"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.1.vhost}}/admin-stp"	, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.1.vhost}}/stats"	, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.1.vhost}}/adv1"		, state: directory }
 - { dest: "{{WEB_APP_BASE}}/{{WEB_APPS.1.vhost}}/vocalmestre1" , state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.0.vhost}}/current" 	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.1.vhost}}/current"	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.2.vhost}}/current"	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.3.vhost}}/current" 	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.4.vhost}}/current"	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/{{WEB_APPS.5.vhost}}/current"	, state: directory }
 - { dest: "{{WEB_LOG_BASE}}/mod_jk/current"			, state: directory }


APACHE_COPY:
 - { src: modules/  , dest: "{{APACHE_CONF}}/modules/" }

APACHE_TEMPLATE:
 - src: mod_jk.conf.j2
   dest: "{{APACHE_CONF}}/conf/mod_jk.conf"
   var1: "{{WEB_LOG_BASE}}"
 - src: workers.properties.j2
   dest: "{{APACHE_CONF}}/conf/workers.properties"
   var1: "{{TOMCAT_HOME}}"
 - src: gv-authent.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.1.vhost}}.conf"
   var1: "{{WEB_APPS.1.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 - src: gv-admmsgvocale-svi.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.0.vhost}}.conf"
   var1: "{{WEB_APPS.0.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 - src: gv-provisioning.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.2.vhost}}.conf"
   var1: "{{WEB_APPS.2.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 - src: gv-svifiles.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.5.vhost}}.conf"
   var1: "{{WEB_APPS.5.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 - src: gv-switchingservice.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.3.vhost}}.conf"
   var1: "{{WEB_APPS.3.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 - src: gv-webservices.conf.j2
   dest: "{{APACHE_CONF}}/conf.d/{{WEB_APPS.4.vhost}}.conf"
   var1: "{{WEB_APPS.4.vhost}}"
   var2: "{{WEB_APP_BASE}}"
   var3: "{{WEB_LOG_BASE}}"
 
APACHE_LINEINFILE:
 - { dest: "{{APACHE_CONF}}/conf/httpd.conf" , line: "include conf/mod_jk.conf" }


